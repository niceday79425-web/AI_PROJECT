<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockWise | Dividend Scouter</title>
    <link rel="stylesheet" href="css/style.css">
    <script>
        (function () {
            const userLang = navigator.language || navigator.userLanguage;
            const hasRedirected = sessionStorage.getItem('redirected');
            if (!hasRedirected) {
                sessionStorage.setItem('redirected', 'true');
                if (userLang.startsWith('ko')) {
                    window.location.href = '/ko' + window.location.pathname;
                } else if (userLang.startsWith('pt')) {
                    window.location.href = '/pt' + window.location.pathname;
                }
            }
        })();
    </script>
</head>

<body>
    <div class="container">
        <header>
            <div class="logo">StockWise.ai</div>
            <nav class="lang-selector">
                <a href="/ko/list.html" class="lang-link">KO</a>
                <a href="/list.html" class="lang-link active">EN</a>
                <a href="/pt/list.html" class="lang-link">PT</a>
            </nav>
        </header>
        <div class="ad-slot"></div>
        <main>
            <section class="card">
                <h2>ğŸ† Premium Dividend Insights (Scouter)</h2>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                    Analyze top 50+ dividend stocks with our proprietary grading system.
                </p>

                <!-- Controls -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <input type="text" id="searchBox" placeholder="Search by ticker or name..."
                        style="flex: 1; min-width: 200px; padding: 0.75rem; border: 1px solid #333; background: #1a1a1a; color: white; border-radius: 8px;">
                    <select id="gradeFilter"
                        style="padding: 0.75rem; border: 1px solid #333; background: #1a1a1a; color: white; border-radius: 8px;">
                        <option value="all">All Grades</option>
                        <option value="Së“±ê¸‰">Së“±ê¸‰ (Premium)</option>
                        <option value="Aë“±ê¸‰">Aë“±ê¸‰ (Excellent)</option>
                        <option value="Bë“±ê¸‰">Bë“±ê¸‰ (Good)</option>
                        <option value="Cë“±ê¸‰">Cë“±ê¸‰ (Fair)</option>
                    </select>
                    <select id="sortBy"
                        style="padding: 0.75rem; border: 1px solid #333; background: #1a1a1a; color: white; border-radius: 8px;">
                        <option value="yield">Sort by Yield</option>
                        <option value="ticker">Sort by Ticker</option>
                        <option value="grade">Sort by Grade</option>
                    </select>
                </div>

                <div style="overflow-x: auto;">
                    <table id="dividendTable"
                        style="width: 100%; border-collapse: collapse; margin-top: 1rem; background: #1a1a1a; border-radius: 12px; overflow: hidden;">
                        <thead style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <tr style="color: white; text-align: left;">
                                <th style="padding: 1rem;">Ticker</th>
                                <th style="padding: 1rem;">Name</th>
                                <th style="padding: 1rem; text-align: right;">Yield</th>
                                <th style="padding: 1rem; text-align: center;">Grade</th>
                            </tr>
                        </thead>
                        <tbody id="dividendTableBody">
                            <tr>
                                <td colspan="4" style="padding: 2rem; text-align: center; color: #666;">
                                    Loading dividend data...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p id="stockCount" style="margin-top: 1rem; color: #666; font-size: 0.9rem; text-align: right;">
                    Showing 0 stocks
                </p>
            </section>
        </main>
        <div class="ad-slot"></div>
        <footer>
            <div class="footer-content">
                <p>&copy; 2026 StockWise.ai - Smart Dividend Investing</p>
                <div class="legal-disclaimer">
                    <h4 style="margin-bottom: 0.5rem; font-size: 0.9rem;">âš ï¸ Legal Disclaimer / ë²•ì  ê³ ì§€</h4>
                    <p style="font-size: 0.85rem; line-height: 1.6;">
                        <strong>ë³¸ ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ì •ë³´ëŠ” ì •ë³´ ì œê³µ ë° êµìœ¡ ëª©ì ì´ë©°, íˆ¬ì ìë¬¸ ë˜ëŠ” íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹™ë‹ˆë‹¤.</strong><br>
                        ë°°ë‹¹ê¸ˆ ë° ë°°ë‹¹ë¥ ì€ ë³€ë™ë  ìˆ˜ ìˆìœ¼ë©° ë³´ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
                        ê³¼ê±°ì˜ ì„±ê³¼ê°€ ë¯¸ë˜ì˜ ìˆ˜ìµì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
                        ë³¸ ì‚¬ì´íŠ¸ì˜ ì •ë³´ë¥¼ ì´ìš©í•œ íˆ¬ì ê²°ê³¼ì— ëŒ€í•´ ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Script to load Dividend Insights -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let dividendData = [];

            // DOM Elements
            const tableBody = document.getElementById('dividendTableBody');
            const searchBox = document.getElementById('searchBox');
            const gradeFilter = document.getElementById('gradeFilter');
            const sortBy = document.getElementById('sortBy');
            const stockCount = document.getElementById('stockCount');

            // Grade Badge Component
            const getGradeBadge = (grade) => {
                const colors = {
                    'Së“±ê¸‰': 'background: linear-gradient(135deg, #FFD700 0%, #FDB931 100%); color: black; box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);',
                    'Aë“±ê¸‰': 'background: #10B981; color: white;',
                    'Bë“±ê¸‰': 'background: #3B82F6; color: white;',
                    'Cë“±ê¸‰': 'background: #6B7280; color: white;'
                };
                const style = colors[grade] || 'background: #6B7280; color: white;';
                return `<span style="padding: 4px 12px; border-radius: 20px; font-weight: bold; font-size: 0.85rem; ${style}">${grade}</span>`;
            };

            // Render Table
            const renderTable = (data) => {
                tableBody.innerHTML = '';

                if (data.length === 0) {
                    tableBody.innerHTML = `<tr><td colspan="4" style="padding: 2rem; text-align: center; color: #666;">No stocks found matching your criteria.</td></tr>`;
                    stockCount.textContent = `Showing 0 stocks`;
                    return;
                }

                data.forEach(stock => {
                    const row = document.createElement('tr');
                    row.style.borderBottom = '1px solid #333';
                    row.innerHTML = `
                        <td style="padding: 1rem; font-weight: bold; color: #fff;">${stock.ticker}</td>
                        <td style="padding: 1rem; color: #ccc;">${stock.name}</td>
                        <td style="padding: 1rem; text-align: right; color: #4ADE80; font-weight: bold;">${stock.dividend_yield}%</td>
                        <td style="padding: 1rem; text-align: center;">${getGradeBadge(stock.grade)}</td>
                    `;
                    tableBody.appendChild(row);
                });

                stockCount.textContent = `Showing ${data.length} stocks`;
            };

            // Filter and Sort Logic
            const filterAndSort = () => {
                const searchTerm = searchBox.value.toLowerCase();
                const gradeTerm = gradeFilter.value;
                const sortType = sortBy.value;

                let filtered = dividendData.filter(stock => {
                    const matchesSearch = stock.ticker.toLowerCase().includes(searchTerm) ||
                        stock.name.toLowerCase().includes(searchTerm);
                    const matchesGrade = gradeTerm === 'all' || stock.grade === gradeTerm;
                    return matchesSearch && matchesGrade;
                });

                filtered.sort((a, b) => {
                    if (sortType === 'yield') return b.dividend_yield - a.dividend_yield;
                    if (sortType === 'ticker') return a.ticker.localeCompare(b.ticker);
                    if (sortType === 'grade') {
                        const grades = { 'Së“±ê¸‰': 4, 'Aë“±ê¸‰': 3, 'Bë“±ê¸‰': 2, 'Cë“±ê¸‰': 1 };
                        return grades[b.grade] - grades[a.grade];
                    }
                });

                renderTable(filtered);
            };

            // Initial Load
            fetch('dividend_insights.json')
                .then(response => response.json())
                .then(data => {
                    dividendData = data.stocks;
                    filterAndSort(); // Initial render
                })
                .catch(err => {
                    console.error('Error loading dividend data:', err);
                    tableBody.innerHTML = `<tr><td colspan="4" style="padding: 2rem; text-align: center; color: #ef4444;">Failed to load data. Please try again later.</td></tr>`;
                });

            // Event Listeners
            searchBox.addEventListener('input', filterAndSort);
            gradeFilter.addEventListener('change', filterAndSort);
            sortBy.addEventListener('change', filterAndSort);
        });
    </script>

</html>